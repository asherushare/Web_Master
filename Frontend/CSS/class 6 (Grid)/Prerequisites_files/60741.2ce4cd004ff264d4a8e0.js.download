"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[60741],{60741:(e,t,s)=>{s.d(t,{XW:()=>Z,xU:()=>A,Fz:()=>m,OL:()=>R,qy:()=>b,jE:()=>y,h8:()=>U,ac:()=>C,jQ:()=>K,CP:()=>T,vv:()=>j,mc:()=>p,il:()=>S});var n=s(15861),r=s(64687),a=s.n(r),o=(s(41539),s(88674),s(17727),s(69600),s(21249),s(47941),s(92741)),i=s(93949),u=s(41162),c=s(68485),l=s(4942);s(92222);function d(e,t){var s,n;return null!==(n=(s={},(0,l.Z)(s,c.OD.PASSED,{title:"Approve signup request".concat(t?"s":""),subtitle:"Are you sure you want to allow ".concat(t?"these users":"this user"," to access your school?"),buttonLabel:"Approve"}),(0,l.Z)(s,c.OD.REJECTED,{title:"Reject signup request".concat(t?"s":""),subtitle:"Are you sure you want to reject ".concat(t?"these users' requests":"this user's request"," to access your school?"),buttonLabel:"Reject"}),(0,l.Z)(s,c.OD.PENDING,{title:"Revert back to pending",subtitle:"Are you sure you want to revert ".concat(t?"these users' access requests":"this user's access request"," back to pending?\n"),buttonLabel:"Back to pending"}),s)[e])&&void 0!==n?n:{}}function h(e,t){var s,n;return null!==(n=(s={},(0,l.Z)(s,c.OD.PASSED,{title:"Access request".concat(t?"s":""," approved"),subtitle:"".concat(t?"These users":"This user"," can now access your school.")}),(0,l.Z)(s,c.OD.REJECTED,{title:"Access request".concat(t?"s":""," rejected"),subtitle:"".concat(t?"These users' requests":"This user's request"," to access your school ").concat(t?"have":"has"," been rejected.")}),(0,l.Z)(s,c.OD.PENDING,{title:"Reverted to pending",subtitle:"".concat(t?"These users' requests":"This user's request"," to access your school ").concat(t?"have":"has"," been reverted back to pending.")}),s)[e])&&void 0!==n?n:{}}var f=s(29315),g=s(64041),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"closeManageUserSidebar";e.$root.$emit(t)},p=function(e,t,s){!0===t?showMessage("alert","User Suspend","Do you really want to suspend user "+s.username+"?",[{name:"Suspend",func:w,args:[e,s.id,t]},{name:"Cancel"}]):showMessage("alert","User Un-Suspend","Do you really want to un-suspend this user "+s.username+"?",[{name:"Unsuspend",func:w,args:[e,s.id,t]},{name:"Cancel"}])};function w(e,t,s){var n=server+"author/user/"+t+"/"+(!0===s?"suspend":"role-user");o.Z.post(n).then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Failed to suspend/unsuspend account",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);S()})).catch((function(e){showMessage("alert","Failed to suspend/unsuspend account",e.message,[{name:"OK"}])})).finally((function(){return m(e)}))}function v(e,t){window.broadcastEvent({action:"save"},!0);o.Z.post("".concat(server,"author/bulk/send_email_verification"),t).then((function(t){!function(e){if(e.data.errors&&e.data.errors.length>0)throw e.data.errors.map((function(e){return e.message})).join(", ")}(t),null!==e&&e.clearUserSelectionAndUncheckUsers();var s=window.authorController.redirectTo;return e&&!e.$lwGates.hasActivityViewPermission()&&(s=function(){return showMessage("info","User actions log","You have no access to proceed. To access this page, the “View activity log” permission is required.",[{name:"OK"}])}),window.broadcastEvent({action:"asyncMassImportInProgress",payload:{id:t.data.importLogId}}),showMessage("success","Resend verification","Verification emails are being sent. You will be notified when finished",[{name:"OK"},{name:"Go to user actions log",func:s,args:["/author/import_logs"]}])})).catch((function(e){showMessage("alert","Failed to send verification emails",e,[{name:"OK"}])})).finally((function(){return window.broadcastEvent({action:"saveFinished"},!0)}))}var y=function(e,t){var s,n=t?t.user_ids:[],r=function(){var e=n.length;return 0!==e&&1===e},a="this user?",o="these users?",i="these users?";showMessage("alert","Resend verification email","Are you sure you want to resend the verification email to ".concat(r()?a:(s=t.user_filters||{},1===Object.keys(s).length&&s.hasOwnProperty("pending_verification")&&"pending_verification"===s.pending_verification?o:r()?void 0:i)),[{name:"Resend",func:v,args:[e,t]},{name:"Cancel"}])},b=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(""!==s)showMessage("alert","Resend activation email","Are you sure you want to resend the activation email to this user?",[{name:"Resend",func:M,args:[e,t,s]},{name:"Cancel"}]);else{var n="";n=1===Object.keys(t.userFilters||{}).length&&t.userFilters.never_logged_in?'all "Never Logged In" users?':"selected users?",showMessage("alert","Resend activation email","Are you sure you want to resend the activation email to "+n,[{name:"Resend",func:M,args:[e,t,s]},{name:"Cancel"}])}};function M(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""!==s&&(t.userIds=[s]),window.broadcastEvent({action:"save"},!0),o.Z.post(server+"author/import/reminder",t).then((function(t){if(t.data.errors&&t.data.errors.length>0)throw t.data.errors.map((function(e){return e.message})).join(", ");null!==e&&e.clearUserSelectionAndUncheckUsers();var s=window.authorController.redirectTo;return e.$lwGates.hasActivityViewPermission()||(s=function(){return showMessage("info","User actions log","You have no access to proceed. To access this page, the “View activity log” permission is required.",[{name:"OK"}])}),window.broadcastEvent({action:"asyncMassImportInProgress",payload:{id:t.data.importLogId}}),showMessage("success","Resend activation","Activation emails are being send. You will be notified when finished",[{name:"OK"},{name:"Go to user actions log",func:s,args:["/author/import_logs"]}])})).catch((function(e){showMessage("alert","Failed to send activation emails",e,[{name:"OK"}])})).finally((function(){return window.broadcastEvent({action:"saveFinished"},!0)}))}var U=function(e,t){showMessage("alert","Password Reset","Do you really want to reset password? An email will also be sent to the related user.",[{name:"Reset",func:E,args:[e,t]},{name:"Cancel",func:m,args:[e]}])};function E(e,t){o.Z.post(server+"author/user/"+t+"/password-reset").then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Error resetting user password",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);showMessage("info","Reset Password","A reset password email has been sent to the user",[{name:"OK"}])})).catch((function(e){showMessage("alert","Error resetting user password",e.message,[{name:"OK"}])})).finally((function(){e.$root.$emit("closeManageUserSidebar")}))}var Z=function(e,t){showMessage("alert","User Anonymize","Do you really want to anonymize user "+t.username+"?",[{name:"Anonymize",func:O,args:[e,t.id]},{name:"Cancel"}])};function O(e,t){var s=server+"author/user/"+t+"/anonymize";o.Z.post(s).then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Failed to anonymize account",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);S()})).catch((function(e){showMessage("alert","Failed to anonymize account",e.message,[{name:"OK"}])})).finally((function(){return m(e)}))}var A=function(e,t){showMessage("alert","User Permanent Delete","Do you really want to permanently delete user "+t.username+"? This action is not reversible.",[{name:"Delete User Account",func:F,args:[e,t.id]},{name:"Cancel"}])};function F(e,t){var s=server+"author/user/"+t+"/destroy";o.Z.post(s).then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Failed to delete account",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);S()})).catch((function(e){showMessage("alert","Failed to delete account",e.message,[{name:"OK"}])})).finally((function(){return m(e)}))}var S=function(){var e=document.getElementById("contentHolder");(null===e&&(e=parent.document.getElementById("contentHolder")),null!==e)&&e.contentWindow.postMessage({action:"updateUsersList"},window.top.document.location.href)},R=function(e,t){showMessage("alert","Reset 2FA","Are you sure you want to reset two-factor authentication for this user?",[{name:"Reset",func:D,args:[e,t.id]},{name:"Cancel"}])};function D(e,t){return I.apply(this,arguments)}function I(){return(I=(0,n.Z)(a().mark((function e(t,s){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,f.C)(),r=n.fetchResetUserTwoFactor,e.next=3,r(s);case 3:if(!(o=e.sent).isBad){e.next=6;break}return e.abrupt("return",showMessage("alert","Failed to reset 2fa",o.response.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]));case 6:(0,g.c)(c.zG.INFORM,"2FA reset","You have successfully reset 2FA for this user.",[{name:"OK"}],[],{timeout:!1},!0),S(),m(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=(0,n.Z)(a().mark((function e(t,s,n){var r,o,l,d,f,g,p,w=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>3&&void 0!==w[3]&&w[3],o=w.length>4&&void 0!==w[4]?w[4]:null,l=w.length>5&&void 0!==w[5]?w[5]:0,e.prev=3,window.broadcastEvent({action:"save"},!0),d=r?u.Z.postEligibilityStatusForAllUsers:u.Z.postEligibilityStatusForSpecifiedUsers,e.next=8,(0,i.jk)(d(c.mq.SIGN_UP,s,n,o));case 8:S(),f=h(s,l>1),g=f.title,p=f.subtitle,window.showMessage(c.zG.SUCCESS,g,p,[{name:"OK"}]),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.prev=16,window.broadcastEvent({action:"saveFinished"},!0),m(t),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[3,13,16,20]])})));return function(t,s,n){return e.apply(this,arguments)}}(),C=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new Promise((function(o){var i=d(t,a>1),u=i.title,c=i.subtitle,l=i.buttonLabel;window.showMessage("alert",u,c,[{name:l,func:function(){k(e,t,s,n,r,a).then((function(){return o({proceeded:!0})}))}},{name:"Cancel",func:function(){return o({proceeded:!1})}}])}))},K=function(e,t){var s=server+"user-roles/impersonate/start/"+t;o.Z.post(s).then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Failed to start user impersonation",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);var s=t.data.data.token;return e.$lwGates.startUserImpersonation(s),window.top.location.href="/"})).catch((function(e){showMessage("alert","Failed to start user impersonation",e.message,[{name:"OK"}])})).finally((function(){return m(e,"closeImpersonateUserModal")}))},j=function(e,t){showMessage("alert","Log out from "+t+"'s account","You are about to logout from user "+t+" and log in back to your account.",[{name:"Proceed",func:T,args:[e]},{name:"Cancel"}])};function T(e){var t=window.me.id,s=getUserToken(),n=server+"user-roles/impersonate/stop/"+t+"/"+s;return o.Z.post(n).then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Failed to stop user impersonation",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);var s=t.data.data.referer;return e.$lwGates.stopUserImpersonation(),window.location.href=s})).catch((function(e){showMessage("alert","Failed to stop user impersonation",e.message,[{name:"OK"}])})).finally((function(){return m(e)}))}},41162:(e,t,s)=>{s.d(t,{Z:()=>i});s(92222);var n=s(93949),r=s(68485),a=s(46536),o={getStats:function(){return a.Z.get("/user_stats")},postPopupStatusToUserModel:function(e,t){return a.Z.post("/user/popup_status/".concat(e),t)},addElementTags:function(e,t,s,n){return a.Z.post("/user/link-action",{id:e,elementId:t,type:s,siteTemplateId:n})},getUsers:function(){return a.Z.get("/users")},getUsersWithRoles:function(){return a.Z.get("/author/users-with-roles")},getEligibilityUsers:function(e,t,s){var r=(0,n.RX)(null!=s?s:{}),o=r?"?":"";return a.Z.get("/author/users/eligibility/".concat(e,"/").concat(t).concat(o).concat(r))},postEligibilityStatusForSpecifiedUsers:function(e,t,s,n){return a.Z.post("/author/users/eligibility/".concat(e,"/status"),{userIds:s,status:t,inverse:!1,currentStatus:n})},postEligibilityStatusForAllUsers:function(e,t,s,n){return a.Z.post("/author/users/eligibility/".concat(e,"/status"),{userIds:s,status:t,inverse:!0,currentStatus:n})},searchUsers:function(e){return a.Z.post("/author/users_search",e)},searchUsersByEmail:function(e){return a.Z.post("/author/users_search_email",e)},approveUsersEligibility:function(e,t){return a.Z.post("/author/users/eligibility/".concat(e,"/status"),{userIds:t,status:r.OD.PASSED})},rejectUsersEligibility:function(e,t){return a.Z.post("/author/users/eligibility/".concat(e,"/status"),{userIds:t,status:r.OD.REJECTED})},getLeads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Z.get("/emails",{params:e})},deleteLead:function(e){return a.Z.delete("/email/".concat(e))},forgetUserRequest:function(){return a.Z.post("/user/forget")},editTags:function(e){return a.Z.post("/author/users/edit-tags",e)},userDataAccessRequest:function(){return a.Z.post("/user/data-access")}};window.repo=o;const i=o}}]);